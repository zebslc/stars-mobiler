# Stellar Remnants — Economy (Phase 2)

## Problem Statement
Deliver the core economic loop with production, mining, population growth, build queues, and a planet detail UI that minimizes micromanagement.

## Scope
- In scope: Population growth, factories/mine production, mineral extraction with depletion, global stockpile plus transfer range rules, per-planet build queues, basic governors.
- Out of scope: Fleet logistics and ship builds beyond queue entries; combat; AI behavior.

## Requirements
- Functional:
  - Implement logistic population growth: `growth = pop × rate × (1 - pop/maxPop)`.
  - Factories: 1 resource/turn; max factories = population/10; cost 10 resources + 4 Ge.
  - Mines: extraction per mineral type = `operableMines * concentration / 100`; depletion `newConc = conc - (extraction × 0.01)`; cost 5 resources.
  - Stockpile: global resources/minerals; transfer range limits sharing; isolated planets use locals only; freighter capacity throttles throughput (numeric placeholder in MVP).
  - Build Queue: Mine, Factory, Defense, Terraform, Ship; apply costs and time; governors: balanced/mining/industrial/military/shipyard/manual.
  - Turn processing applies production, mining, population growth in correct order.
- Nonfunctional:
  - All calculations deterministic per turn; signals drive UI updates; avoid long synchronous loops.

## Acceptance Criteria
- Given a planet with population and factories, when processing a turn, then resources equal operable factories and factories respect population/10.
- Given mines and concentrations, when processing a turn, then extraction produces minerals per type and concentrations decrease by 1% of extraction.
- Given transfer range settings, when two owned planets are outside range, then they do not share stockpiles and the UI marks them isolated.
- Given a balanced governor, when the queue is empty, then it schedules mines until 50% target, then factories, then defenses.
- Given a queue item with costs, when the player lacks Germanium, then the item cannot start and a warning is shown.

## UX Outline
- Planet Detail: population bar, production summary, minerals/concentration bars, build queue list with add/remove, governor selector.
- Map: isolated planets visually marked; transfer range circle overlay toggle.

## Data Contracts
- PlayerEconomy: resources, minerals{Fe, Bo, Ge}, transferRange, freighterCapacity.
- Build Queue entries: type, progress, costs, effects.
- Turn logs summarize economy changes for Turn Summary.

## Open Questions
- Governor target thresholds tuning.
- Freighter capacity model specifics (simple cap vs path-based throughput).

